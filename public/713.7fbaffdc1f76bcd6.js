"use strict";(self.webpackChunkAdminProApp=self.webpackChunkAdminProApp||[]).push([[713],{6713:(E,v,a)=>{a.r(v),a.d(v,{AuthModule:()=>L});var u=a(9808),n=a(2382),c=a(1663),p=a(5861),b=a(6805),A=a(2961);function Z(r,l){const o="object"==typeof l;return new Promise((t,i)=>{const g=new A.Hp({next:s=>{t(s),g.unsubscribe()},error:i,complete:()=>{o?t(l.defaultValue):i(new b.K)}});r.subscribe(g)})}var T=a(5226),f=a.n(T),e=a(1223),h=a(3071);const q=["googleBtn"];function _(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," * El email es obligatorio y debe ser valido "),e.qZA())}function x(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," * La contrase\xf1a es obligatoria "),e.qZA())}const C=function(){return["/register"]};function U(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1,"* El nombre es obligatorio"),e.qZA())}function I(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," * El email es obligatorio y debe ser valido "),e.qZA())}function w(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," * La contrase\xf1a es obligatoria "),e.qZA())}function F(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," * La contrase\xf1a es obligatoria "),e.qZA())}function M(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," * Debe aceptar los t\xe9rminos y condiciones "),e.qZA())}function k(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," * Las contrase\xf1as ingresadas deben coincidir "),e.qZA())}const O=function(){return["/login"]},R=[{path:"login",component:(()=>{class r{constructor(o,t,i,g){var s,d;this.ngZone=o,this.router=t,this.fb=i,this._userService=g,this.loginForm=this.fb.group({email:[null!==(s=localStorage.getItem("email"))&&void 0!==s?s:"",[n.kI.required,n.kI.email]],password:["",n.kI.required],remember:[!1]}),localStorage.getItem("email")&&(null===(d=this.loginForm.get("remember"))||void 0===d||d.patchValue(!0))}ngAfterViewInit(){this.googleInit()}googleInit(){google.accounts.id.initialize({client_id:"847804325325-ta6st73tg1522gt74fqn8h0o1mv37elg.apps.googleusercontent.com",callback:o=>this.handleGoogleCredentialResponse(o)}),google.accounts.id.renderButton(this.googleBtn.nativeElement,{theme:"outline",size:"large"})}handleGoogleCredentialResponse(o){var t=this;return(0,p.Z)(function*(){console.log("Encoded JWT ID token: "+o.credential),console.log("this = ",t);try{const i=yield Z(t._userService.loginGoogle(null==o?void 0:o.credential));console.log({login:i}),t.ngZone.run(()=>{t.router.navigateByUrl("m/dashboard")})}catch(i){console.error(i)}})()}isInvalidField(o){const t=this.loginForm.get(o);return(null==t?void 0:t.invalid)&&t.touched||!1}login(){var o=this;return(0,p.Z)(function*(){var t;if(o.loginForm.markAllAsTouched(),!o.loginForm.valid)return void console.info("#### EL FORMULARIO DE LOGIN ES INVALIDO");const{email:i,password:g,remember:s}=o.loginForm.value,d={email:i,password:g};try{yield Z(o._userService.login(d)),o.loginForm.reset(),s?localStorage.setItem("email",i):localStorage.removeItem("email"),o.router.navigate(["m/dashboard"])}catch(m){console.error(m),f().fire({title:(null===(t=null==m?void 0:m.error)||void 0===t?void 0:t.msg)||"No se pudo iniciar sesi\xf3n",icon:"error"})}})()}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(e.R0b),e.Y36(c.F0),e.Y36(n.qu),e.Y36(h.K))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login"]],viewQuery:function(o,t){if(1&o&&e.Gf(q,5),2&o){let i;e.iGM(i=e.CRH())&&(t.googleBtn=i.first)}},decls:56,vars:5,consts:[["id","wrapper",1,"login-register","login-sidebar",2,"background-image","url(../../../assets/images/background/login-register.jpg)"],[1,"login-box","card"],[1,"card-body"],["id","loginform",1,"form-horizontal","form-material",3,"formGroup","submit"],["href","javascript:void(0)",1,"text-center","db"],["src","../../../assets/images/logo-icon.png","alt","Home"],["src","../../../assets/images/logo-text.png","alt","Home"],[1,"form-group","m-t-40"],[1,"col-xs-12"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"form-group"],["type","password","placeholder","Password","formControlName","password",1,"form-control"],[1,"form-group","row"],[1,"col-md-12"],[1,"checkbox","checkbox-primary","pull-left","p-t-0"],["id","checkbox-signup","type","checkbox","formControlName","remember",1,"filled-in","chk-col-light-blue"],["for","checkbox-signup"],["href","javascript:void(0)","id","to-recover",1,"text-dark","pull-right"],[1,"fa","fa-lock","m-r-5"],[1,"row"],[1,"col","text-danger"],[4,"ngIf"],[1,"form-group","text-center","m-t-20"],["type","submit",1,"btn","btn-info","btn-lg","btn-block","text-uppercase","btn-rounded"],[1,"col-xs-12","col-sm-12","col-md-12","m-t-10","text-center"],[1,"social"],["id","buttonDiv",1,"btn"],["googleBtn",""],[1,"form-group","m-b-0"],[1,"col-sm-12","text-center"],["href","#",1,"text-primary","m-l-5",3,"routerLink"],["id","recoverform",1,"form-horizontal"],[1,"text-muted"],["type","email","placeholder","Email",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block","text-uppercase","waves-effect","waves-light"]],template:function(o,t){1&o&&(e.TgZ(0,"section",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"form",3),e.NdJ("submit",function(){return t.login()}),e.TgZ(4,"a",4),e._UZ(5,"img",5),e._UZ(6,"br"),e._UZ(7,"img",6),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e._UZ(10,"input",9),e.qZA(),e.qZA(),e.TgZ(11,"div",10),e.TgZ(12,"div",8),e._UZ(13,"input",11),e.qZA(),e.qZA(),e.TgZ(14,"div",12),e.TgZ(15,"div",13),e.TgZ(16,"div",14),e._UZ(17,"input",15),e.TgZ(18,"label",16),e._uU(19," Remember me "),e.qZA(),e.qZA(),e.TgZ(20,"a",17),e._UZ(21,"i",18),e._uU(22," Forgot pwd?"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",19),e.TgZ(24,"div",20),e.YNc(25,_,2,0,"p",21),e.YNc(26,x,2,0,"p",21),e.qZA(),e.qZA(),e.TgZ(27,"div",22),e.TgZ(28,"div",8),e.TgZ(29,"button",23),e._uU(30," Log In "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",19),e.TgZ(32,"div",24),e.TgZ(33,"div",25),e._UZ(34,"div",26,27),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",28),e.TgZ(37,"div",29),e._uU(38," Don't have an account? "),e.TgZ(39,"a",30),e.TgZ(40,"b"),e._uU(41,"Sign Up"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"form",31),e.TgZ(43,"div",10),e.TgZ(44,"div",8),e.TgZ(45,"h3"),e._uU(46,"Recover Password"),e.qZA(),e.TgZ(47,"p",32),e._uU(48," Enter your Email and instructions will be sent to you! "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",10),e.TgZ(50,"div",8),e._UZ(51,"input",33),e.qZA(),e.qZA(),e.TgZ(52,"div",22),e.TgZ(53,"div",8),e.TgZ(54,"button",34),e._uU(55," Reset "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.Q6J("formGroup",t.loginForm),e.xp6(22),e.Q6J("ngIf",t.isInvalidField("email")),e.xp6(1),e.Q6J("ngIf",t.isInvalidField("password")),e.xp6(13),e.Q6J("routerLink",e.DdM(4,C)))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,n.Wl,u.O5,c.yS,n.F],styles:[".login-register[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat;background-position:center center;height:100%;width:100%;padding:10% 0;position:fixed}.login-box[_ngcontent-%COMP%]{width:400px;margin:0 auto}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{width:100%;left:0;right:0}.login-box[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]{display:block;margin-bottom:30px}#recoverform[_ngcontent-%COMP%]{display:none}.login-sidebar[_ngcontent-%COMP%]{padding:0;margin-top:0}.login-sidebar[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]{right:0;position:absolute;height:100%}"]}),r})()},{path:"register",component:(()=>{class r{constructor(o,t,i){this.fb=o,this._userService=t,this.router=i,this.registerForm=this.fb.group({name:["",n.kI.required],email:["",[n.kI.required,n.kI.email]],password:["",n.kI.required],password2:["",n.kI.required],terms:[!1,n.kI.requiredTrue]},{validators:this.passwordMatchValidator("password","password2")})}isInvalidField(o){const t=this.registerForm.get(o);return(null==t?void 0:t.invalid)&&t.touched||!1}passwordMatchValidator(o,t){return i=>{const g=i.get(o),s=i.get(t);return!g||!s||i.errors&&!i.errors.passwordMismatch?null:g.value!==s.value?(i.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(i.setErrors(null),null)}}registerUser(){var o=this;return(0,p.Z)(function*(){var t,i;if(o.registerForm.markAllAsTouched(),!o.registerForm.valid)return void console.info("#### EL FORMULARIO DE REGISTRO ES INVALIDO");const g=null===(t=o.registerForm)||void 0===t?void 0:t.value;try{yield Z(o._userService.createUser(g)),f().fire({title:`El usuario "${g.name}" fue creado!`,icon:"success"}),o.registerForm.reset(),o.router.navigate(["m/dashboard"])}catch(s){console.error(s),f().fire({title:(null===(i=null==s?void 0:s.error)||void 0===i?void 0:i.msg)||"Error inesperado",icon:"error"})}})()}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(n.qu),e.Y36(h.K),e.Y36(c.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register"]],decls:51,vars:9,consts:[["id","wrapper",1,"login-register","login-sidebar",2,"background-image","url(../assets/images/background/login-register.jpg)"],[1,"login-box","card"],[1,"card-body"],["id","loginform","autocomplete","off",1,"form-horizontal","form-material",3,"formGroup","ngSubmit"],["href","javascript:void(0)",1,"text-center","db"],["src","../assets/images/logo-icon.png","alt","Home"],["src","../assets/images/logo-text.png","alt","Home"],[1,"box-title","m-t-40","m-b-0"],[1,"form-group","m-t-20"],[1,"col-xs-12"],["type","text","placeholder","Name","formControlName","name",1,"form-control"],[1,"form-group"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],["type","password","placeholder","Password","formControlName","password",1,"form-control"],["type","password","placeholder","Confirm Password","formControlName","password2",1,"form-control"],[1,"form-group","row"],[1,"col-md-12"],[1,"checkbox","checkbox-primary","p-t-0"],["id","checkbox-signup","type","checkbox","formControlName","terms"],["for","checkbox-signup"],["href","#"],[1,"row"],[1,"col","text-danger"],[4,"ngIf"],[1,"form-group","text-center","m-t-20"],["type","submit",1,"btn","btn-info","btn-lg","btn-block","text-uppercase","waves-effect","waves-light"],[1,"form-group","m-b-0"],[1,"col-sm-12","text-center"],["href","#",1,"text-info","m-l-5",3,"routerLink"]],template:function(o,t){1&o&&(e.TgZ(0,"section",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"form",3),e.NdJ("ngSubmit",function(){return t.registerUser()}),e.TgZ(4,"a",4),e._UZ(5,"img",5),e._UZ(6,"br"),e._UZ(7,"img",6),e.qZA(),e.TgZ(8,"h3",7),e._uU(9,"Register Now"),e.qZA(),e.TgZ(10,"small"),e._uU(11,"Create your account and enjoy"),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"div",9),e._UZ(14,"input",10),e.qZA(),e.qZA(),e.TgZ(15,"div",11),e.TgZ(16,"div",9),e._UZ(17,"input",12),e.qZA(),e.qZA(),e.TgZ(18,"div",11),e.TgZ(19,"div",9),e._UZ(20,"input",13),e.qZA(),e.qZA(),e.TgZ(21,"div",11),e.TgZ(22,"div",9),e._UZ(23,"input",14),e.qZA(),e.qZA(),e.TgZ(24,"div",15),e.TgZ(25,"div",16),e.TgZ(26,"div",17),e._UZ(27,"input",18),e.TgZ(28,"label",19),e._uU(29," I agree to all "),e.TgZ(30,"a",20),e._uU(31,"Terms"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",21),e.TgZ(33,"div",22),e.YNc(34,U,2,0,"p",23),e.YNc(35,I,2,0,"p",23),e.YNc(36,w,2,0,"p",23),e.YNc(37,F,2,0,"p",23),e.YNc(38,M,2,0,"p",23),e.YNc(39,k,2,0,"p",23),e.qZA(),e.qZA(),e.TgZ(40,"div",24),e.TgZ(41,"div",9),e.TgZ(42,"button",25),e._uU(43," Sign Up "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"div",26),e.TgZ(45,"div",27),e.TgZ(46,"p"),e._uU(47," Already have an account? "),e.TgZ(48,"a",28),e.TgZ(49,"b"),e._uU(50,"Sign In"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.Q6J("formGroup",t.registerForm),e.xp6(31),e.Q6J("ngIf",t.isInvalidField("name")),e.xp6(1),e.Q6J("ngIf",t.isInvalidField("email")),e.xp6(1),e.Q6J("ngIf",t.isInvalidField("password")),e.xp6(1),e.Q6J("ngIf",t.isInvalidField("password2")),e.xp6(1),e.Q6J("ngIf",t.isInvalidField("terms")),e.xp6(1),e.Q6J("ngIf",t.registerForm.hasError("passwordMismatch")),e.xp6(9),e.Q6J("routerLink",e.DdM(8,O)))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,n.Wl,u.O5,c.yS],styles:[".login-register[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat;background-position:center center;height:100%;width:100%;padding:10% 0;position:fixed}.login-box[_ngcontent-%COMP%]{width:400px;margin:0 auto}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{width:100%;left:0;right:0}.login-box[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]{display:block;margin-bottom:30px}#recoverform[_ngcontent-%COMP%]{display:none}.login-sidebar[_ngcontent-%COMP%]{padding:0;margin-top:0}.login-sidebar[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]{right:0;position:absolute;height:100%}"]}),r})()},{path:"",redirectTo:"login",pathMatch:"full"}];let P=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[c.Bz.forChild(R)],c.Bz]}),r})(),L=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[u.ez,P,n.UX,n.u5]]}),r})()}}]);